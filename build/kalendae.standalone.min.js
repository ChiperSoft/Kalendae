(function(h){var d,e;var g=function(q,k){if(typeof document.addEventListener!=="function"&&!b.isIE8()){return}var B=false;try{B=q instanceof Element}catch(n){B=!!q&&B.nodeType===1}if(!(B||typeof(q)==="string")){k=q}var u=this,C=u.classes,t=u.settings=b.merge(u.defaults,{attachTo:q},k||{}),w=u.container=b.make("div",{"class":C.container}),m=u.calendars=[],r=e().day(t.weekStart),o,z=[],A,v,p,D,s,G=[],F,y=0,x=t.months;if(b.isIE8()){b.addClassName(w,"ie8")}y=7;while(y--){z.push(r.format(t.columnHeaderFormat));r.add("days",1)}f(u);if(typeof t.subscribe==="object"){for(y in t.subscribe){if(t.subscribe.hasOwnProperty(y)){u.subscribe(y,t.subscribe[y])}}}u._sel=[];if(!!t.selected){u.setSelected(t.selected,false)}if(!!t.viewStartDate){o=e(t.viewStartDate,t.format)}else{if(u._sel.length>0){o=e(u._sel[0])}else{o=e()}}u.viewStartDate=o.date(1);var E=({past:t.months-1,"today-past":t.months-1,any:t.months>2?Math.floor(t.months/2):0,"today-future":0,future:0})[this.settings.direction];if(E&&e().month()==e(u.viewStartDate).month()){u.viewStartDate=e(u.viewStartDate).subtract({M:E}).date(1)}if(typeof t.blackout==="function"){u.blackout=t.blackout}else{if(!!t.blackout){var l=c(t.blackout,t.parseSplitDelimiter);u.blackout=function(j){j=e(j).yearDay();if(j<1||!u._sel){return false}var H=l.length;while(H--){if(l[H].yearDay()===j){return true}}return false}}else{u.blackout=function(){return false}}}u.direction=u.directions[t.direction]?u.directions[t.direction]:u.directions.any;x=Math.max(t.months,1);while(x--){A=b.make("div",{"class":C.calendar},w);A.setAttribute("data-cal-index",x);if(t.months>1){if(x==Math.max(t.months-1,1)){b.addClassName(A,C.monthFirst)}else{if(x===0){b.addClassName(A,C.monthLast)}else{b.addClassName(A,C.monthMiddle)}}}v=b.make("div",{"class":C.title},A);if(!t.useYearNav){b.addClassName(v,C.disableYearNav)}b.make("a",{"class":C.previousYear},v);b.make("a",{"class":C.previousMonth},v);b.make("a",{"class":C.nextYear},v);b.make("a",{"class":C.nextMonth},v);p=b.make("span",{"class":C.caption},v);D=b.make("div",{"class":C.header},A);y=0;do{F=b.make("span",{},D);F.innerHTML=z[y]}while(++y<7);s=b.make("div",{"class":C.days},A);y=0;G=[];while(y++<42){G.push(b.make("span",{},s))}m.push({caption:p,days:G});if(x){b.make("div",{"class":C.monthSeparator},w)}}u.draw();b.addEvent(w,"mousedown",function(j,H){var i;if(b.hasClassName(H,C.nextMonth)){if(!u.disableNext&&u.publish("view-changed",u,["next-month"])!==false){u.viewStartDate.add("months",1);u.draw()}return false}else{if(b.hasClassName(H,C.previousMonth)){if(!u.disablePreviousMonth&&u.publish("view-changed",u,["previous-month"])!==false){u.viewStartDate.subtract("months",1);u.draw()}return false}else{if(b.hasClassName(H,C.nextYear)){if(!u.disableNext&&u.publish("view-changed",u,["next-year"])!==false){u.viewStartDate.add("years",1);u.draw()}return false}else{if(b.hasClassName(H,C.previousYear)){if(!u.disablePreviousMonth&&u.publish("view-changed",u,["previous-year"])!==false){u.viewStartDate.subtract("years",1);u.draw()}return false}else{if(b.hasClassName(H.parentNode,C.days)&&b.hasClassName(H,C.dayActive)&&(i=H.getAttribute("data-date"))){i=e(i,t.dayAttributeFormat).hours(12);if(u.publish("date-clicked",u,[i])!==false){switch(t.mode){case"multiple":if(!u.addSelected(i)){u.removeSelected(i)}break;case"range":u.addSelected(i);break;case"single":default:u.addSelected(i);break}}return false}}}}}return false});if(!!(t.attachTo=b.$(t.attachTo))){t.attachTo.appendChild(w)}};g.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:true,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:false,format:null,subscribe:null,columnHeaderFormat:"dd",titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",useYearNav:true,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:false,disableNextMonth:false,disablePreviousYear:false,disableNextYear:false,directions:{past:function(i){return e(i).yearDay()>=d.yearDay()},"today-past":function(i){return e(i).yearDay()>d.yearDay()},any:function(i){return false},"today-future":function(i){return e(i).yearDay()<d.yearDay()},future:function(i){return e(i).yearDay()<=d.yearDay()}},getSelectedAsDates:function(){var j=[];var k=0,l=this._sel.length;for(;k<l;k++){j.push(this._sel[k].toDate())}return j},getSelectedAsText:function(l){var j=[];var k=0,m=this._sel.length;for(;k<m;k++){j.push(this._sel[k].format(l||this.settings.format||"YYYY-MM-DD"))}return j},getSelectedRaw:function(){var j=[];var k=0,l=this._sel.length;for(;k<l;k++){j.push(e(this._sel[k]))}return j},getSelected:function(j){var i=this.getSelectedAsText(j);switch(this.settings.mode){case"range":i.splice(2);return i.join(this.settings.rangeDelimiter);case"multiple":return i.join(this.settings.multipleDelimiter);case"single":default:return i[0]}},isSelected:function(l){l=e(l).yearDay();if(l<1||!this._sel||this._sel.length<1){return false}switch(this.settings.mode){case"range":var k=this._sel[0]?this._sel[0].yearDay():0,j=this._sel[1]?this._sel[1].yearDay():0;if(k===l||j===l){return 1}if(!k||!j){return 0}if((l>k&&l<j)||(k<j&&l<k&&l>j)){return -1}return false;case"multiple":var m=this._sel.length;while(m--){if(this._sel[m].yearDay()===l){return true}}return false;case"single":default:return(this._sel[0]&&(this._sel[0].yearDay()===l))}return false},setSelected:function(k,j){var m,n=c(k,this.settings.parseSplitDelimiter,this.settings.format),l=c(this.getSelected(),this.settings.parseSplitDelimiter,this.settings.format);m=l.length;while(m--){this.removeSelected(l[m],j)}m=n.length;while(m--){this.addSelected(n[m],j)}if(j!==false){this.viewStartDate=e(n[0],this.settings.format).dates(1);this.draw()}},addSelected:function(j,i){j=e(j).hours(12);if(this.settings.dayOutOfMonthClickable&&this.settings.mode!=="range"){this.makeSelectedDateVisible(j)}switch(this.settings.mode){case"multiple":if(!this.isSelected(j)){this._sel.push(j)}else{return false}break;case"range":if(this._sel.length!==1){this._sel=[j]}else{if(j.yearDay()>this._sel[0].yearDay()){this._sel[1]=j}else{this._sel=[j,this._sel[0]]}}break;case"single":default:this._sel=[j];break}this._sel.sort(function(l,k){return l.yearDay()-k.yearDay()});this.publish("change",this,[j]);if(i!==false){this.draw()}return true},makeSelectedDateVisible:function(i){outOfViewMonth=e(i).date("1").diff(this.viewStartDate,"months");if(outOfViewMonth<0){this.viewStartDate.subtract("months",1)}else{if(outOfViewMonth>0&&outOfViewMonth>=this.settings.months){this.viewStartDate.add("months",1)}}},removeSelected:function(k,j){k=e(k).hours(12);var l=this._sel.length;while(l--){if(this._sel[l].yearDay()===k.yearDay()){this._sel.splice(l,1);this.publish("change",this,[k]);if(j!==false){this.draw()}return true}}return false},draw:function a(){var r=e(this.viewStartDate).hours(12),w,n=this.classes,m,v,t,q=0,u,p=0,o,z,x,l=this.settings,y;u=this.calendars.length;do{w=e(r).date(1);w.day(w.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);m=this.calendars[q];m.caption.innerHTML=r.format(this.settings.titleFormat);p=0;do{v=m.days[p];t=[];z=this.isSelected(w);if(z){t.push(({"-1":n.dayInRange,"1":n.daySelected,"true":n.daySelected})[z])}if(w.month()!=r.month()){t.push(n.dayOutOfMonth)}else{t.push(n.dayInMonth)}if(!(this.blackout(w)||this.direction(w)||(w.month()!=r.month()&&l.dayOutOfMonthClickable===false))||z>0){t.push(n.dayActive)}if(w.yearDay()===d.yearDay()){t.push(n.dayToday)}x=w.format(this.settings.dayAttributeFormat);if(l.dateClassMap[x]){t.push(l.dateClassMap[x])}v.innerHTML=w.format(l.dayNumberFormat);v.className=t.join(" ");v.setAttribute("data-date",x);w.add("days",1)}while(++p<42);r.add("months",1)}while(++q<u);if(l.directionScrolling){if(l.direction==="today-past"||l.direction==="past"){y=r.add({m:1}).diff(e(),"months",true);if(y<=0){this.disableNextMonth=false;b.removeClassName(this.container,n.disableNextMonth)}else{this.disableNextMonth=true;b.addClassName(this.container,n.disableNextMonth)}}else{if(l.direction==="today-future"||l.direction==="future"){y=r.subtract({m:1}).diff(e(),"months",true);if(y>l.months){this.disablePreviousMonth=false;b.removeClassName(this.container,n.disablePreviousMonth)}else{this.disablePreviousMonth=true;b.addClassName(this.container,n.disablePreviousMonth)}}}if(l.direction==="today-past"||l.direction==="past"){y=r.add({m:12}).diff(e(),"months",true);if(y<=-11){this.disableNextYear=false;b.removeClassName(this.container,n.disableNextYear)}else{this.disableNextYear=true;b.addClassName(this.container,n.disableNextYear)}}else{if(l.direction==="today-future"||l.direction==="future"){y=r.subtract({m:12}).diff(e(),"months",true);if(y>(11+l.months)){this.disablePreviousYear=false;b.removeClassName(this.container,n.disablePreviousYear)}else{this.disablePreviousYear=true;b.addClassName(this.container,n.disablePreviousYear)}}}}}};var c=function(l,k,n){var j=[];if(typeof l==="string"){l=l.split(k)}else{if(!b.isArray(l)){l=[l]}}var o=l.length,m=0;do{if(l[m]){j.push(e(l[m],n).hours(12))}}while(++m<o);return j};window.Kalendae=g;var b=g.util={isIE8:function(){return !!((/msie 8./i).test(navigator.appVersion)&&!(/opera/i).test(navigator.userAgent)&&window.ActiveXObject&&XDomainRequest&&!window.msPerformance)},$:function(i){return(typeof i=="string")?document.getElementById(i):i},$$:function(i){return document.querySelectorAll(i)},make:function(m,l,j){var i,n=document.createElement(m);if(!!l){for(i in l){if(l.hasOwnProperty(i)){n.setAttribute(i,l[i])}}}if(!!j){j.appendChild(n)}return n},isVisible:function(i){return i.offsetWidth>0||i.offsetHeight>0},getStyle:function(j,i){var k;if(j.currentStyle){k=j.currentStyle[i]}else{if(window.getComputedStyle){k=window.getComputedStyle(j,null)[i]}}return k},domReady:function(i){/in/.test(document.readyState)?setTimeout(function(){b.domReady(i)},9):i()},addEvent:function(j,i,l){var k=function(m){m=m||window.event;var n=m.target||m.srcElement;var o=l.apply(j,[m,n]);if(o===false){if(!!m.preventDefault){m.preventDefault()}else{m.returnValue=false;m.cancelBubble=true}}return o};if(j.attachEvent){j.attachEvent("on"+i,k)}else{j.addEventListener(i,k,false)}return k},removeEvent:function(j,i,k){if(j.detachEvent){j.detachEvent("on"+i,k)}else{j.removeEventListener(i,k,false)}},hasClassName:function(k,j){if(!(k=b.$(k))){return false}var i=k.className;return(i.length>0&&(i==j||new RegExp("(^|\\s)"+j+"(\\s|$)").test(i)))},addClassName:function(j,i){if(!(j=b.$(j))){return}if(!b.hasClassName(j,i)){j.className+=(j.className?" ":"")+i}},removeClassName:function(j,i){if(!(j=b.$(j))){return}j.className=b.trimString(j.className.replace(new RegExp("(^|\\s+)"+i+"(\\s+|$)")," "))},isFixed:function(i){do{if(b.getStyle(i,"position")==="fixed"){return true}}while((i=i.offsetParent));return false},scrollContainer:function(i){do{var j=b.getStyle(i,"overflow");if(j==="auto"||j==="scroll"){return i}}while((i=i.parentNode)&&i!=window.document.body);return null},getPosition:function(l,j){var i=l.offsetLeft,m=l.offsetTop,k={};if(!j){while((l=l.offsetParent)){i+=l.offsetLeft;m+=l.offsetTop}}k[0]=k.left=i;k[1]=k.top=m;return k},getHeight:function(i){return i.offsetHeight||i.scrollHeight},getWidth:function(i){return i.offsetWidth||i.scrollWidth},trimString:function(i){return i.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){var j=(arguments[0]===true),m={},l=j?1:0;var k=function(n,i){if(typeof i!=="object"){return}for(var o in i){if(i.hasOwnProperty(o)){if(j&&typeof n[o]==="object"&&typeof i[o]==="object"){_update(n[o],i[o])}else{n[o]=i[o]}}}return n};for(;l<arguments.length;l++){k(m,arguments[l])}return m},isArray:function(i){return Object.prototype.toString.call(i)=="[object Array]"}};if(typeof document.addEventListener==="function"){g.util.domReady(function(){var l=b.$$(".auto-kal"),k=l.length,m,j,n;while(k--){m=l[k];n=m.getAttribute("data-kal");j=(n==null||n=="")?{}:(new Function("return {"+n+"};"))();if(m.tagName==="INPUT"){new g.Input(m,j)}else{new g(b.merge(j,{attachTo:m}))}}})}g.Input=function(n,s){if(typeof document.addEventListener!=="function"&&!b.isIE8()){return}var o=this.input=b.$(n),p,k;if(!o||o.tagName!=="INPUT"){throw"First argument for Kalendae.Input must be an <input> element or a valid element id."}var r=this,l=r.classes,i=r.settings=b.merge(r.defaults,s);i.attachTo=window.document.body;if(!i.selected){i.selected=o.value}else{p=true}g.call(r,i);if(i.closeButton){k=b.make("a",{"class":l.closeButton},r.container);b.addEvent(k,"click",function(){o.blur()})}if(p){o.value=r.getSelected()}var q=r.container,m=false;q.style.display="none";b.addClassName(q,l.positioned);b.addEvent(q,"mousedown",function(t,u){m=true});b.addEvent(window.document,"mousedown",function(t,u){m=false});b.addEvent(o,"focus",function(){r.setSelected(this.value);r.show()});b.addEvent(o,"blur",function(){if(m){m=false;o.focus()}else{r.hide()}});b.addEvent(o,"keyup",function(t){r.setSelected(this.value)});var j=b.scrollContainer(o);if(j){b.addEvent(j,"scroll",function(t){o.blur()})}r.subscribe("change",function(){o.value=r.getSelected()})};g.Input.prototype=b.merge(g.prototype,{defaults:b.merge(g.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:true,offsetLeft:0,offsetTop:0}),classes:b.merge(g.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var m=this.container,j=m.style,o=this.input,n=b.getPosition(o),i=b.scrollContainer(o),l=i?i.scrollTop:0,k=this.settings;j.display="";switch(k.side){case"left":j.left=(n.left-b.getWidth(m)+k.offsetLeft)+"px";j.top=(n.top+k.offsetTop-l)+"px";break;case"right":j.left=(n.left+b.getWidth(o))+"px";j.top=(n.top+k.offsetTop-l)+"px";break;case"top":j.left=(n.left+k.offsetLeft)+"px";j.top=(n.top-b.getHeight(m)+k.offsetTop-l)+"px";break;case"bottom":default:j.left=(n.left+k.offsetLeft)+"px";j.top=(n.top+b.getHeight(o)+k.offsetTop-l)+"px";break}j.position=b.isFixed(o)?"fixed":"absolute";this.publish("show",this)},hide:function(){this.container.style.display="none";this.publish("hide",this)}});
/*
* MinPubSub, modified for use on Kalendae
* Copyright(c) 2011 Daniel Lamb <daniellmb.com>
* https://github.com/daniellmb/MinPubSub
* MIT Licensed
*/
var f=function(j){if(!j){j=this}var i=j.c_||{};j.publish=function(m,p,l){var n=i[m],k=n?n.length:0,o;while(k--){o=n[k].apply(p,l||[]);if(typeof o==="boolean"){return o}}};j.subscribe=function(k,m,l){if(!i[k]){i[k]=[]}if(l){i[k].push(m)}else{i[k].unshift(m)}return[k,m]};j.unsubscribe=function(m){var l=i[m[0]],n=m[1],k=l?l.length:0;while(k--){if(l[k]===n){l.splice(k,1)}}}};(function(B){var ag,I="2.0.0",ak=Math.round,am,X={},W=(typeof module!=="undefined"&&module.exports),F=/^\/?Date\((\-?\d+)/i,t=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,z=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ap=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,p=/\d\d?/,Y=/\d{1,3}/,aa=/\d{3}/,Q=/\d{1,4}/,y=/[+\-]?\d{1,6}/,R=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,k=/Z|[\+\-]\d\d:?\d\d/i,C=/T/i,x=/[\+\-]?\d+(\.\d{1,3})?/,S=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,m="YYYY-MM-DDTHH:mm:ssZ",r=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],K=/([\+\-]|\d\d)/gi,v="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ah={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},u={},N="DDD w W M D d".split(" "),E="M D H h m s w W".split(" "),q={M:function(){return this.month()+1},MMM:function(i){return this.lang().monthsShort(this,i)},MMMM:function(i){return this.lang().months(this,i)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(i){return this.lang().weekdaysMin(this,i)},ddd:function(i){return this.lang().weekdaysShort(this,i)},dddd:function(i){return this.lang().weekdays(this,i)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return aj(this.year()%100,2)},YYYY:function(){return aj(this.year(),4)},YYYYY:function(){return aj(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return aj(~~(this.milliseconds()/10),2)},SSS:function(){return aj(this.milliseconds(),3)},Z:function(){var ar=-this.zone(),i="+";if(ar<0){ar=-ar;i="-"}return i+aj(~~(ar/60),2)+":"+aj(~~ar%60,2)},ZZ:function(){var ar=-this.zone(),i="+";if(ar<0){ar=-ar;i="-"}return i+aj(~~(10*ar/6),4)},X:function(){return this.unix()}};function U(ar,i){return function(at){return aj(ar.call(this,at),i)}}function O(i){return function(ar){return this.lang().ordinal(i.call(this,ar))}}while(N.length){am=N.pop();q[am+"o"]=O(q[am])}while(E.length){am=E.pop();q[am+am]=U(q[am],2)}q.DDDD=U(q.DDD,3);function ao(){}function D(i){A(this,i)}function aq(au){var aw=this._data={},ax=au.years||au.year||au.y||0,ar=au.months||au.month||au.M||0,i=au.weeks||au.week||au.w||0,aA=au.days||au.day||au.d||0,ay=au.hours||au.hour||au.h||0,av=au.minutes||au.minute||au.m||0,az=au.seconds||au.second||au.s||0,at=au.milliseconds||au.millisecond||au.ms||0;this._milliseconds=at+az*1000+av*60000+ay*3600000;this._days=aA+i*7;this._months=ar+ax*12;aw.milliseconds=at%1000;az+=af(at/1000);aw.seconds=az%60;av+=af(az/60);aw.minutes=av%60;ay+=af(av/60);aw.hours=ay%24;aA+=af(ay/24);aA+=i*7;aw.days=aA%30;ar+=af(aA/30);aw.months=ar%12;ax+=af(ar/12);aw.years=ax}function A(at,ar){for(var au in ar){if(ar.hasOwnProperty(au)){at[au]=ar[au]}}return at}function af(i){if(i<0){return Math.ceil(i)}else{return Math.floor(i)}}function aj(at,ar){var i=at+"";while(i.length<ar){i="0"+i}return i}function ac(at,av,au){var ar=av._milliseconds,aw=av._days,ax=av._months,i;if(ar){at._d.setTime(+at+ar*au)}if(aw){at.date(at.date()+aw*au)}if(ax){i=at.date();at.date(1).month(at.month()+ax*au).date(Math.min(i,at.daysInMonth()))}}function L(i){return Object.prototype.toString.call(i)==="[object Array]"}function ab(aw,av){var ar=Math.min(aw.length,av.length),at=Math.abs(aw.length-av.length),ax=0,au;for(au=0;au<ar;au++){if(~~aw[au]!==~~av[au]){ax++}}return ax+at}ao.prototype={set:function(ar){var au,at;for(at in ar){au=ar[at];if(typeof au==="function"){this[at]=au}else{this["_"+at]=au}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(i){return this._months[i.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(i){return this._monthsShort[i.month()]},monthsParse:function(ar){var au,aw,av,at;if(!this._monthsParse){this._monthsParse=[]}for(au=0;au<12;au++){if(!this._monthsParse[au]){aw=ag([2000,au]);av="^"+this.months(aw,"")+"|^"+this.monthsShort(aw,"");this._monthsParse[au]=new RegExp(av.replace(".",""),"i")}if(this._monthsParse[au].test(ar)){return au}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(i){return this._weekdays[i.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(i){return this._weekdaysShort[i.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(i){return this._weekdaysMin[i.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(ar){var i=this._longDateFormat[ar];if(!i&&this._longDateFormat[ar.toUpperCase()]){i=this._longDateFormat[ar.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(at){return at.slice(1)});this._longDateFormat[ar]=i}return i},meridiem:function(i,ar,at){if(i>11){return at?"pm":"PM"}else{return at?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(ar,at){var i=this._calendar[ar];return typeof i==="function"?i.apply(at):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(au,at,ar,av){var i=this._relativeTime[ar];return(typeof i==="function")?i(au,at,ar,av):i.replace(/%d/i,au)},pastFuture:function(at,i){var ar=this._relativeTime[at>0?"future":"past"];return typeof ar==="function"?ar(i):ar.replace(/%s/i,i)},ordinal:function(i){return this._ordinal.replace("%d",i)},_ordinal:"%d",preparse:function(i){return i},postformat:function(i){return i},week:function(i){return Z(i,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}};function H(ar,i){i.abbr=ar;if(!X[ar]){X[ar]=new ao()}X[ar].set(i);return X[ar]}function G(i){if(!i){return ag.fn._lang}if(!X[i]&&W){require("./lang/"+i)}return X[i]}function P(i){if(i.match(/\[.*\]/)){return i.replace(/^\[|\]$/g,"")}return i.replace(/\\/g,"")}function ae(au){var av=au.match(t),ar,at;for(ar=0,at=av.length;ar<at;ar++){if(q[av[ar]]){av[ar]=q[av[ar]]}else{av[ar]=P(av[ar])}}return function(aw){var i="";for(ar=0;ar<at;ar++){i+=typeof av[ar].call==="function"?av[ar].call(aw,au):av[ar]}return i}}function V(ar,av){var at=5;function au(i){return ar.lang().longDateFormat(i)||i}while(at--&&z.test(av)){av=av.replace(z,au)}if(!u[av]){u[av]=ae(av)}return u[av](ar)}function o(i){switch(i){case"DDDD":return aa;case"YYYY":return Q;case"YYYYY":return y;case"S":case"SS":case"SSS":case"DDD":return Y;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return R;case"X":return x;case"Z":case"ZZ":return k;case"T":return C;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return p;default:return new RegExp(i.replace("\\",""))}}function n(aw,au,av){var at,i,ar=av._a;switch(aw){case"M":case"MM":ar[1]=(au==null)?0:~~au-1;break;case"MMM":case"MMMM":at=G(av._l).monthsParse(au);if(at!=null){ar[1]=at}else{av._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(au!=null){ar[2]=~~au}break;case"YY":ar[0]=~~au+(~~au>68?1900:2000);break;case"YYYY":case"YYYYY":ar[0]=~~au;break;case"a":case"A":av._isPm=((au+"").toLowerCase()==="pm");break;case"H":case"HH":case"h":case"hh":ar[3]=~~au;break;case"m":case"mm":ar[4]=~~au;break;case"s":case"ss":ar[5]=~~au;break;case"S":case"SS":case"SSS":ar[6]=~~(("0."+au)*1000);break;case"X":av._d=new Date(parseFloat(au)*1000);break;case"Z":case"ZZ":av._useUTC=true;at=(au+"").match(K);if(at&&at[1]){av._tzh=~~at[1]}if(at&&at[2]){av._tzm=~~at[2]}if(at&&at[0]==="+"){av._tzh=-av._tzh;av._tzm=-av._tzm}break}if(au==null){av._isValid=false}}function s(au){var av,at,ar=[];if(au._d){return}for(av=0;av<7;av++){au._a[av]=ar[av]=(au._a[av]==null)?(av===2?1:0):au._a[av]}ar[3]+=au._tzh||0;ar[4]+=au._tzm||0;at=new Date(0);if(au._useUTC){at.setUTCFullYear(ar[0],ar[1],ar[2]);at.setUTCHours(ar[3],ar[4],ar[5],ar[6])}else{at.setFullYear(ar[0],ar[1],ar[2]);at.setHours(ar[3],ar[4],ar[5],ar[6])}au._d=at}function T(at){var aw=at._f.match(t),ar=at._i,au,av;at._a=[];for(au=0;au<aw.length;au++){av=(o(aw[au]).exec(ar)||[])[0];if(av){ar=ar.slice(ar.indexOf(av)+av.length)}if(q[aw[au]]){n(aw[au],av,at)}}if(at._isPm&&at._a[3]<12){at._a[3]+=12}if(at._isPm===false&&at._a[3]===12){at._a[3]=0}s(at)}function J(au){var ay,ar,aw,ax=99,av,at,az;while(au._f.length){ay=A({},au);ay._f=au._f.pop();T(ay);ar=new D(ay);if(ar.isValid()){aw=ar;break}az=ab(ay._a,ar.toArray());if(az<ax){ax=az;aw=ar}}A(au,aw)}function ai(at){var au,ar=at._i;if(S.exec(ar)){at._f="YYYY-MM-DDT";for(au=0;au<4;au++){if(r[au][1].exec(ar)){at._f+=r[au][0];break}}if(k.exec(ar)){at._f+=" Z"}T(at)}else{at._d=new Date(ar)}}function an(at){var ar=at._i,i=F.exec(ar);if(ar===B){at._d=new Date()}else{if(i){at._d=new Date(+i[1])}else{if(typeof ar==="string"){ai(at)}else{if(L(ar)){at._a=ar.slice(0);s(at)}else{at._d=ar instanceof Date?new Date(+ar):new Date(ar)}}}}}function ad(i,at,ar,au,av){return av.relativeTime(at||1,!!ar,i,au)}function M(at,i,ar){var ay=ak(Math.abs(at)/1000),au=ak(ay/60),ax=ak(au/60),az=ak(ax/24),av=ak(az/365),aw=ay<45&&["s",ay]||au===1&&["m"]||au<45&&["mm",au]||ax===1&&["h"]||ax<22&&["hh",ax]||az===1&&["d"]||az<=25&&["dd",az]||az<=45&&["M"]||az<345&&["MM",ak(az/30)]||av===1&&["y"]||["yy",av];aw[2]=i;aw[3]=at>0;aw[4]=ar;return ad.apply({},aw)}function Z(au,at,av){var ar=av-at,i=av-au.day();if(i>ar){i-=7}if(i<ar-7){i+=7}return Math.ceil(ag(au).add("d",i).dayOfYear()/7)}function al(ar){var i=ar._i,at=ar._f;if(i===null||i===""){return null}if(typeof i==="string"){ar._i=i=G().preparse(i)}if(ag.isMoment(i)){ar=A({},i);ar._d=new Date(+i._d)}else{if(at){if(L(at)){J(ar)}else{T(ar)}}else{an(ar)}}return new D(ar)}ag=function(i,ar,at){return al({_i:i,_f:ar,_l:at,_isUTC:false})};ag.utc=function(i,ar,at){return al({_useUTC:true,_isUTC:true,_l:at,_i:i,_f:ar})};ag.unix=function(i){return ag(i*1000)};ag.duration=function(i,av){var au=ag.isDuration(i),at=(typeof i==="number"),aw=(au?i._data:(at?{}:i)),ar;if(at){if(av){aw[av]=i}else{aw.milliseconds=i}}ar=new aq(aw);if(au&&i.hasOwnProperty("_lang")){ar._lang=i._lang}return ar};ag.version=I;ag.defaultFormat=m;ag.lang=function(au,ar){var at;if(!au){return ag.fn._lang._abbr}if(ar){H(au,ar)}else{if(!X[au]){G(au)}}ag.duration.fn._lang=ag.fn._lang=G(au)};ag.langData=function(i){if(i&&i._lang&&i._lang._abbr){i=i._lang._abbr}return G(i)};ag.isMoment=function(i){return i instanceof D};ag.isDuration=function(i){return i instanceof aq};ag.fn=D.prototype={clone:function(){return ag(this)},valueOf:function(){return +this._d},unix:function(){return Math.floor(+this._d/1000)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return ag.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!ab(this._a,(this._isUTC?ag.utc(this._a):ag(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return !!this._isValid},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(ar){var i=V(this,ar||ag.defaultFormat);return this.lang().postformat(i)},add:function(i,at){var ar;if(typeof i==="string"){ar=ag.duration(+at,i)}else{ar=ag.duration(i,at)}ac(this,ar,1);return this},subtract:function(i,at){var ar;if(typeof i==="string"){ar=ag.duration(+at,i)}else{ar=ag.duration(i,at)}ac(this,ar,-1);return this},diff:function(av,au,i){var aw=this._isUTC?ag(av).utc():ag(av).local(),ar=(this.zone()-aw.zone())*60000,ax,at;if(au){au=au.replace(/s$/,"")}if(au==="year"||au==="month"){ax=(this.daysInMonth()+aw.daysInMonth())*43200000;at=((this.year()-aw.year())*12)+(this.month()-aw.month());at+=((this-ag(this).startOf("month"))-(aw-ag(aw).startOf("month")))/ax;if(au==="year"){at=at/12}}else{ax=(this-aw)-ar;at=au==="second"?ax/1000:au==="minute"?ax/60000:au==="hour"?ax/3600000:au==="day"?ax/86400000:au==="week"?ax/604800000:ax}return i?at:af(at)},from:function(ar,i){return ag.duration(this.diff(ar)).lang(this.lang()._abbr).humanize(!i)},fromNow:function(i){return this.from(ag(),i)},calendar:function(){var ar=this.diff(ag().startOf("day"),"days",true),i=ar<-6?"sameElse":ar<-1?"lastWeek":ar<0?"lastDay":ar<1?"sameDay":ar<2?"nextDay":ar<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},isLeapYear:function(){var i=this.year();return(i%4===0&&i%100!==0)||i%400===0},isDST:function(){return(this.zone()<ag([this.year()]).zone()||this.zone()<ag([this.year(),5]).zone())},day:function(ar){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();return ar==null?i:this.add({d:ar-i})},startOf:function(i){i=i.replace(/s$/,"");switch(i){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(i==="week"){this.day(0)}return this},endOf:function(i){return this.startOf(i).add(i.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(ar,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)>+ag(ar).startOf(i)},isBefore:function(ar,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)<+ag(ar).startOf(i)},isSame:function(ar,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)===+ag(ar).startOf(i)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return ag.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(i){var ar=ak((ag(this).startOf("day")-ag(this).startOf("year"))/86400000)+1;return i==null?ar:this.add("d",(i-ar))},isoWeek:function(i){var ar=Z(this,1,4);return i==null?ar:this.add("d",(i-ar)*7)},week:function(i){var ar=this.lang().week(this);return i==null?ar:this.add("d",(i-ar)*7)},lang:function(i){if(i===B){return this._lang}else{this._lang=G(i);return this}}};function w(i,ar){ag.fn[i]=ag.fn[i+"s"]=function(at){var au=this._isUTC?"UTC":"";if(at!=null){this._d["set"+au+ar](at);return this}else{return this._d["get"+au+ar]()}}}for(am=0;am<v.length;am++){w(v[am].toLowerCase().replace(/s$/,""),v[am])}w("year","FullYear");ag.fn.days=ag.fn.day;ag.fn.weeks=ag.fn.week;ag.fn.isoWeeks=ag.fn.isoWeek;ag.duration.fn=aq.prototype={weeks:function(){return af(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+this._months*2592000000},humanize:function(ar){var at=+this,i=M(at,!ar,this.lang());if(ar){i=this.lang().pastFuture(at,i)}return this.lang().postformat(i)},lang:ag.fn.lang};function j(i){ag.duration.fn[i]=function(){return this._data[i]}}function l(i,ar){ag.duration.fn["as"+i]=function(){return +this/ar}}for(am in ah){if(ah.hasOwnProperty(am)){l(am,ah[am]);j(am.toLowerCase())}}l("Weeks",604800000);ag.lang("en",{ordinal:function(at){var i=at%10,ar=(~~(at%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th";return at+ar}});this["moment"]=ag}).call(typeof g==="undefined"?window:g);if(!g.moment){if(window.moment){g.moment=window.moment}else{throw"Kalendae requires moment.js. You must use kalendae.standalone.js if moment is not available on the page."}}e=g.moment;e.fn.stripTime=function(){this._d=new Date(Math.floor(this._d.valueOf()/86400000)*86400000);return this};e.fn.yearDay=function(j){var i=Math.floor(this._d/86400000);return(typeof j==="undefined")?i:this.add({d:j-i})};d=g.moment().stripTime();if(typeof jQuery!=="undefined"&&typeof document.addEventListener==="function"){jQuery.fn.kalendae=function(i){this.each(function(j,k){if(k.tagName==="INPUT"){$(k).data("kalendae",new g.Input(k,i))}else{$(k).data("kalendae",new g($.extend({},{attachTo:k},i)))}});return this}}})();